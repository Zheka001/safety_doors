# safety_doors
Репозиторий для решения кейса "Safety Doors" для Хакатона 2021 "Цифровой прорыв"

## Установка

__Важно!__ Проект требует python 3.6.
Установка виртуального окружения не является обязательным шагом. Но рекомендуем его выполнить.
  
```shell script
sudo apt-get install python3.6 python3.6-dev python3-venv  # установить python3.6 и его необходимые модули
cd safety_doors                  # перейти в каталог репозитория
python3.6 -m venv <path_to_venv>      # создать виртуальное окружения
source <path_to_venv>/bin/activate    # активировать виртуальное окружение 
```

Далее необходимо установить необходимые билиотеки:

```shell script
pip install --upgrade pip        # обновить pip (менеджер пакетов python)
pip install wheel                # пакет для быстрой установки зависимостей
pip install -r requirements.txt  # установить необходимые библиотеки (из файла requirements)
cp config-default.yaml config.yaml
```

Далее все изменения конфигурационного файла необходимо проводить в файле `config.yaml`.

## Использование в режиме сервера

Проект написан в форме микросервиса на базе фреймворка flask (режим сервера).
Для его запуска необходимо выполнить команду:

```shell script
python run.py app
```

После этого произойдет запуск сервера на порту `5000`. 
Для обращения к серверу используется механизм http-запросов.
В качестве примера приводим следующий текст запроса:

```shell
curl --location --request POST 'http://localhost:5000/api/1/image_processing' \
--form 'file=@"/home/evgeny/Projects/safety_doors/data/clouds_tof/cloud_0_1620665797175109.pcd.zip"'
```


## Использование в режиме разметки

Для того, чтобы разметить данные необходимо в файле `config.yaml` в разделе `label_creator` указать правильный путь к
папке. Затем выполнить команду:

```shell script
python run.py label
```

В процессе разметки Вам будет показываться изображение облака точек в режиме tof. Изображение можно вращать. После того,
как принято решение по изображению, его необходимо закрыть с помощью крестика или кнопки `Esc`. 
Далее необходимо нажать на выбор кнопки: `1` - опасная ситуация для начала движения, `0` - безопасная ситуация для 
начала движения. После этого нажать на клавишу `Enter` и перейти к следующему изображению. Все результаты сохраняются в
файл, указанный в файле `config.yaml` в разделе `label_creator`.


## Использование в режиме обучения



